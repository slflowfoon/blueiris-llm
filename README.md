# blueiris-llm

Python script to send a base64 alert image to Gemini and then using the response for the notification body.

## Step 1: Installation

Place the following file in a folder named after the camera, for example, `C:\Users\MyUser\Documents\Blue Iris\Driveway\`:
  * `__init__.py`

1. In Blue Iris, create the following action on alert:
   * **Action:** `Run program/script`
   * **File:** `C:\Users\MyUser\Documents\Blue Iris\Driveway\__init__.py`
   * **Parameters:** `--img_path "D:\Directory\Where\Alert\Images\Are\Saved\&ALERT_PATH"`
   * **Camera:** Choose the camera your are setting up, for example, `Driveway`
     
<p align="center"><img src="https://github.com/slflowfoon/blueiris-llm/blob/main/images/Notification%201.png?raw=true" width=500 /></p>

2. Create a delay of `5000msec` to give the script and the LLM enough time to respond.
   
<p align="center"><img src="https://github.com/slflowfoon/blueiris-llm/blob/main/images/Notification%202.png?raw=true" width=500 /></p>

3. Configure your push notification:
   * **Body:** `%1`
     
<p align="center"><img src="https://github.com/slflowfoon/blueiris-llm/blob/main/images/Notification%203.png?raw=true" width=500 /></p>

4. Within **Blue Iris Settings** > **Macros**, we'll setup `%1` to the `response.log` file generated by the script.
   * **%1:** `file://C:\Users\MyUser\Documents\Blue Iris\Driveway\response.log`
     
<p align="center"><img src="https://github.com/slflowfoon/blueiris-llm/blob/main/images/Macro%20Settings.png?raw=true" width=500 /></p>

### Step 2: Required Script Configuration in `__init__.py`

1. `API_KEY`: Gemini API Key
   
## Debugging

Logs are saved in the same directory as the Python script under `blueiris-llm.log`. Default log retention of 30 days.

----
